--- ideapad-laptop-tb2024g6plus.c	2024-06-01 16:13:33.989650246 +0800
@@ -31,7 +31,7 @@
 #include <linux/sysfs.h>
 #include <linux/types.h>
 #include <linux/wmi.h>
-#include "ideapad-laptop.h"
+#include "ideapad-laptop-tb2024g6plus.h"
 
 #include <acpi/video.h>

@@ -152,6 +152,7 @@
		struct led_classdev led;
		unsigned int last_brightness;
	} kbd_bl;
+	bool suspended;
 };
 
 static bool no_bt_rfkill;
@@ -1505,6 +1506,9 @@
 	struct ideapad_private *priv = data;
 	unsigned long vpc1, vpc2, bit;
 
+	if (priv->suspended)
+		return;
+
 	if (read_ec_data(handle, VPCCMD_R_VPC1, &vpc1))
 		return;
 
@@ -1931,10 +1935,19 @@
 	if (priv->dytc)
 		dytc_profile_refresh(priv);
 
+	priv->suspended = false;
+
+	return 0;
+}
+
+static int ideapad_acpi_suspended(struct device *dev)
+{
+	struct ideapad_private *priv = dev_get_drvdata(dev);
+	priv->suspended = true;
 	return 0;
 }
 #endif
-static SIMPLE_DEV_PM_OPS(ideapad_pm, NULL, ideapad_acpi_resume);
+static SIMPLE_DEV_PM_OPS(ideapad_pm, ideapad_acpi_suspended, ideapad_acpi_resume);
 
 static const struct acpi_device_id ideapad_device_ids[] = {
 	{"VPC2004", 0},
